<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <script src="classic.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/game4.css">

</head>

    <body onload="firstscript()">
        <div id="none">
        <audio controls loop autoplay preload="auto" src="pin.mp3" type="audio/mp3"></audio>
        </div>
        <div id="timer">
             <span id="min">5</span> <font size="30px">分</font>
             <span id="sec">00</span> <font size="30px">秒</font>
            </audio>
            <br>
            <p id="aite">相手</p>  
            <br>
            <p id="kekka">結果</p>  
            <br>
            <button id="gu-button" onclick="zyan('0')">グー</button>
            <button id="tyoki-button" onclick="zyan('1')">チョキ</button>
            <button id="pa-button" onclick="zyan('2')">パー</button>
    <script>
       var time = 300;
       var counter;
       var min = document.getElementById("min");
       var sec = document.getElementById("sec");
       var aite = document.getElementById("aite");
       let tepatan = ["ぐー","ちょき","ぱー"];
       let dou = ["勝ち","負け","あいこ"]
       var kekka =  document.getElementById("kekka");
    </script>
    <script>
        function firstscript(){
            
            counter = setInterval( count, 1000);//1秒ごとにcountが動かされる
            

        }
        </script>
        <script>
        function count() {
      if( time === 0 ) {
      sec.innerHTML = 0;
      min.innerHTML = 0;
      alert("起きろや");
      clearInterval( counter );      
      window.location.href = 'index.html';
      } else {

      time -= 1;
      sec.innerHTML = time % 60;
      min.innerHTML = Math.floor( time / 60 );
      }
        }
    let n = 2;
    function zyan(te){
        const aite_te = Math.floor(Math.random() * (n + 1));
        console.log(tepatan[aite_te]);
        aite.innerHTML = tepatan[aite_te];
        if(aite_te == te) //あいこ
        {
            console.log("あいこ");
            kekka.innerHTML = dou[2];
        }
        else jatch((aite_te + 2) % 3, te);
    }

    function jatch(kati_te, zibun){
        if(kati_te == zibun)
        {
            document.getElementById("gu-button").remove();
            document.getElementById("tyoki-button").remove();
            document.getElementById("pa-button").remove();
            //勝ちの処理
            console.log("かち");
             kekka.innerHTML = dou[0];
            setTimeout(()=>{
                window.location.href = 'index.html';
            }, 3000);
        }
        else{
         console.log(",まけ");
          kekka.innerHTML = dou[1];
         time += 30;
        }
    }
    </script>
</body>

</html>